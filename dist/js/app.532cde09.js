(function(e){function t(t){for(var s,o,i=t[0],l=t[1],c=t[2],m=0,p=[];m<i.length;m++)o=i[m],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&p.push(r[o][0]),r[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);u&&u(t);while(p.length)p.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],s=!0,i=1;i<a.length;i++){var l=a[i];0!==r[l]&&(s=!1)}s&&(n.splice(t--,1),e=o(o.s=a[0]))}return e}var s={},r={app:0},n=[];function o(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=s,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(a,s,function(t){return e[t]}.bind(null,s));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0910":function(e,t,a){"use strict";var s=a("6c71"),r=a.n(s);r.a},5687:function(e,t,a){"use strict";var s=a("a4ee"),r=a.n(s);r.a},"56d7":function(e,t,a){"use strict";a.r(t);a("4de4"),a("0d03"),a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("nav",{staticClass:"navbar navbar-expand-lg navbar-dark bg-dark static-top"},[a("div",{staticClass:"container"},[a("router-link",{staticClass:"navbar-brand",attrs:{to:"/home"}},[e._v("Horizon Test")]),e._m(0),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarResponsive"}},[a("ul",{staticClass:"navbar-nav ml-auto"},e._l(e.links,(function(t,s){return a("li",{key:s,staticClass:"nav-item",class:{active:e.$route.name&&0==e.$route.name.indexOf(t.route)}},[a("router-link",{staticClass:"nav-link",attrs:{to:t.route}},[e._v(e._s(t.title))])],1)})),0)])],1)]),a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12"},[a("router-view")],1)])])])},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarResponsive","aria-controls":"navbarResponsive","aria-expanded":"false","aria-label":"Toggle navigation"}},[a("span",{staticClass:"navbar-toggler-icon"})])}],o={name:"App",data:function(){return{links:[{title:"Home",route:"home"},{title:"Location",route:"location"},{title:"Employees",route:"employees"},{title:"Editor",route:"editor"}]}}},i=o,l=a("2877"),c=Object(l["a"])(i,r,n,!1,null,null,null),u=c.exports,m=a("8c4f"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("h1",{staticClass:"my-4"},[e._v("Home")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 col-sm-6"},[a("div",{staticClass:"card text-center"},[a("div",{staticClass:"card-body"},[a("h5",{staticClass:"card-title"},[e._v("Total employees")]),a("div",{directives:[{name:"show",rawName:"v-show",value:null===e.totalEmployees,expression:"totalEmployees === null"}],staticClass:"spinner-border spinner-border-sm",attrs:{role:"status"}},[a("span",{staticClass:"sr-only"},[e._v("Loading...")])]),a("p",{staticClass:"card-text"},[e._v(e._s(e.totalEmployees))])])])]),a("div",{staticClass:"col-12 col-sm-6 mt-1 mt-sm-0"},[a("div",{staticClass:"card text-center"},[a("div",{staticClass:"card-body"},[a("h5",{staticClass:"card-title"},[e._v("New employees")]),a("div",{directives:[{name:"show",rawName:"v-show",value:null===e.newEmployees,expression:"newEmployees === null"}],staticClass:"spinner-border spinner-border-sm",attrs:{role:"status"}},[a("span",{staticClass:"sr-only"},[e._v("Loading...")])]),a("p",{staticClass:"card-text"},[e._v(e._s(e.newEmployees))])])])])])])},d=[],v=(a("96cf"),a("89ba")),f=a("8aa5"),h=(a("e71f"),{}),b={apiKey:"AIzaSyC5l-k6j7bFUreJhdyEXiwTfeZoRjLJ-iU",authDomain:"horizon-fc1c9.firebaseapp.com",databaseURL:"https://horizon-fc1c9.firebaseio.com",projectId:"horizon-fc1c9",storageBucket:"horizon-fc1c9.appspot.com",messagingSenderId:"354530515268",appId:"1:354530515268:web:a5b0d6ef2b435608c61f11"};f["initializeApp"](b),f["firestore"]().settings(h);var g=f,y={name:"Home",data:function(){return{totalEmployees:null,newEmployees:null}},created:function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(){var t,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=g.firestore(),e.next=3,t.collection("employees").get();case 3:return a=e.sent,this.totalEmployees=a.size,s=new Date,s.setHours(0,0,0,0),e.next=9,t.collection("employees").where("created_at",">",s).get();case 9:a=e.sent,this.newEmployees=a.size;case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},_=y,C=Object(l["a"])(_,p,d,!1,null,null,null),w=C.exports,x=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},E=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"map"},[a("h1",{staticClass:"my-4"},[e._v("Map")]),a("div",{staticClass:"mapouter"},[a("div",{attrs:{id:"gmap"}})])])}],O={name:"map",mounted:function(){var e=new google.maps.LatLng(34.0694225,-6.7621869),t={zoom:15,center:e,mapTypeId:google.maps.MapTypeId.ROADMAP},a=new google.maps.Map(document.getElementById("gmap"),t);new google.maps.Marker({position:e,map:a,title:"Where I live right now",animation:google.maps.Animation.DROP})}},j=O,k=(a("811b"),Object(l["a"])(j,x,E,!1,null,null,null)),T=k.exports,$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-left employees"},[a("h1",{staticClass:"my-4"},[e._v("Employees")]),e._m(0),a("div",{staticClass:"tab-content p-3",attrs:{id:"myTabContent"}},[a("div",{staticClass:"tab-pane fade show active",attrs:{id:"employee",role:"tabpanel","aria-labelledby":"employee-tab"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.error,expression:"error"}],staticClass:"alert alert-danger alert-dismissible fade show"},[e._v(" "+e._s(e.error)+" "),e._m(1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.saved,expression:"saved"}],staticClass:"alert alert-success fade show"},[e._v("The employee has been saved!")]),a("form",{on:{submit:function(t){return t.preventDefault(),e.saveEmployee(t)}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"name"}},[e._v("Name")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.name,expression:"form.name"}],staticClass:"form-control",attrs:{id:"name",type:"text",required:"required"},domProps:{value:e.form.name},on:{input:function(t){t.target.composing||e.$set(e.form,"name",t.target.value)}}})]),e._m(2),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"phone"}},[e._v("Phone number")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.phone,expression:"form.phone"}],staticClass:"form-control",attrs:{id:"phone",type:"text"},domProps:{value:e.form.phone},on:{input:function(t){t.target.composing||e.$set(e.form,"phone",t.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"email"}},[e._v("Email address")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.email,expression:"form.email"}],staticClass:"form-control",attrs:{id:"email",type:"email",required:"required"},domProps:{value:e.form.email},on:{input:function(t){t.target.composing||e.$set(e.form,"email",t.target.value)}}})]),a("div",{staticClass:"form-group"},[a("button",{staticClass:"btn btn-primary",attrs:{name:"submit",type:"submit",disabled:e.saving}},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.saving,expression:"saving"}],staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}),e._v(" Register Employee ")])])])]),a("div",{staticClass:"tab-pane fade",attrs:{id:"employees",role:"tabpanel","aria-labelledby":"employees-tab"}},[a("table",{staticClass:"table table-stripped table-bordered"},[e._m(3),a("tbody",e._l(e.employees,(function(t,s){return a("tr",{key:s},[a("td",{staticClass:"d-none d-lg-table-cell"},[e._v(e._s(e._f("humanize")(t.created_at)))]),a("td",{staticClass:"photo d-none d-lg-table-cell"},[t.photo?a("img",{staticClass:"rounded",attrs:{src:t.photo}}):e._e()]),a("td",[e._v(e._s(t.name))]),a("td",{staticClass:"d-none d-sm-table-cell"},[e._v(e._s(t.phone))]),a("td",{staticClass:"d-none d-md-table-cell"},[e._v(e._s(t.email))])])})),0)])])])])},P=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",{staticClass:"nav nav-tabs",attrs:{id:"myTab",role:"tablist"}},[a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link active",attrs:{id:"employee-tab","data-toggle":"tab",href:"#employee",role:"tab","aria-controls":"employee","aria-selected":"true"}},[e._v("employee")])]),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",attrs:{id:"employees-tab","data-toggle":"tab",href:"#employees",role:"tab","aria-controls":"employees","aria-selected":"false"}},[e._v("employees")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[e._v("Ã—")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"photo"}},[e._v("Photo")]),a("input",{staticClass:"form-control",attrs:{id:"photo",type:"file"}}),a("span",{staticClass:"form-text text-muted"},[e._v("Any photo format")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",{staticClass:"d-none d-lg-table-cell"},[e._v("Created at")]),a("th",{staticClass:"d-none d-lg-table-cell"},[e._v("Photo")]),a("th",[e._v("Name")]),a("th",{staticClass:"d-none d-sm-table-cell"},[e._v("Phone")]),a("th",{staticClass:"d-none d-md-table-cell"},[e._v("Email Address")])])])}],R=(a("4160"),a("b0c0"),a("159b"),g.firestore()),M=g.storage().ref(),z={name:"Form",data:function(){return{employees:[],formTpl:{name:"",photo:"",email:"",phone:""},form:this.newForm(),saving:!1,saved:!1,error:null}},created:function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.fetchEmployees();case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{fetchEmployees:function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:R.collection("employees").orderBy("created_at","desc").onSnapshot((function(e){t.employees=[],e.forEach((function(e){var a=e.data();t.employees.push({created_at:a.created_at.toDate(),name:a.name,photo:a.photo,email:a.email,phone:a.phone})}))}));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),saveEmployee:function(){var e=Object(v["a"])(regeneratorRuntime.mark((function e(){var t,a,s,r,n,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.error=null,this.saving=!0,this.saved=!1,e.prev=3,t=new Date,a=document.querySelector("#photo").files[0],s="",!a){e.next=17;break}return r=t.getTime()+"-"+a.name,n={contentType:a.type},e.next=12,M.child(r).put(a,n);case 12:return o=e.sent,e.next=15,o.ref.getDownloadURL();case 15:s=e.sent,console.log(s);case 17:return this.form.photo=s,this.form.created_at=t,e.next=21,R.collection("employees").add(this.form);case 21:this.form=this.newForm(),this.saving=!1,this.saved=!0,i=this,setTimeout((function(){i.saved=!1}),1e3),this.fetchEmployees(),e.next=33;break;case 29:e.prev=29,e.t0=e["catch"](3),this.error=e.t0,this.saving=!1;case 33:case"end":return e.stop()}}),e,this,[[3,29]])})));function t(){return e.apply(this,arguments)}return t}(),newForm:function(){return Object.assign({},this.formTpl)}}},N=z,S=(a("0910"),Object(l["a"])(N,$,P,!1,null,null,null)),D=S.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h1",{staticClass:"my-4"},[e._v("Editor")]),a("code-editor")],1)},A=[],L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.data,expression:"data"}],domProps:{value:e.data},on:{input:[function(t){t.target.composing||(e.data=t.target.value)},e.closeTags]}})},q=[],F=(a("99af"),a("baa5"),a("1157"),{name:"CodeEditor",props:{value:String},data:function(){return{data:this.value}},watch:{data:function(e){this.$emit("input",e)}},methods:{closeTags:function(){var e=this.$el,t=this.data,a=t.length,s=e.selectionStart;if(s&&">"===t[s-1]){var r=t.substring(0,s),n=r.lastIndexOf("<");if(-1!==n){var o=t.substring(n+1,s-1);if(o){var i=t.substring(s,a);this.data="".concat(r,"</").concat(o,">").concat(i),setTimeout((function(){e.selectionStart=s,e.selectionEnd=s}),1)}}}}}}),H=F,J=(a("5687"),Object(l["a"])(H,L,q,!1,null,"6045c194",null)),U=J.exports,B={name:"Editor",components:{CodeEditor:U}},K=B,W=Object(l["a"])(K,I,A,!1,null,null,null),X=W.exports;s["a"].use(m["a"]);var Z=[{path:"/home",name:"home",component:w},{path:"/location",name:"location",component:T},{path:"/employees",name:"employees",component:D},{path:"/editor",name:"editor",component:X}],G=new m["a"]({mode:"history",base:"/",routes:Z}),Q=G;a("4989"),a("ab8b");s["a"].filter("humanize",(function(e){var t=Math.round((+new Date-e)/1e3),a=60,s=60*a,r=24*s;return t<30?"just then.":t<a?t+" seconds ago.":t<2*a?"a minute ago.":t<s?Math.floor(t/a)+" minutes ago.":1==Math.floor(t/s)?"1 hour ago.":t<r?Math.floor(t/s)+" hours ago.":t<2*r?"yesterday":void 0})),s["a"].config.productionTip=!1,new s["a"]({router:Q,render:function(e){return e(u)}}).$mount("#app")},"6c71":function(e,t,a){},"811b":function(e,t,a){"use strict";var s=a("dee9"),r=a.n(s);r.a},a4ee:function(e,t,a){},dee9:function(e,t,a){}});
//# sourceMappingURL=app.532cde09.js.map